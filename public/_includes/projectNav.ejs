<%

// declare the data array found in ./_data.json
const data = public.projects._data;

// traverse the iterable
for (let prop in data) {

	let i = Object.keys(data).indexOf(prop);

	if (current.source == prop) {
		var prev = Object.keys(data)[i - 1],
			next = Object.keys(data)[i + 1];

		%> 

		<nav class="project-nav<% if (prev == 'index') { %><%- ' no-prev' %><% }
			 if (!next) { %><%- ' no-next' %><% } %>"> 

		<% // check for and display link to previous page
			if (prev != 'index' && data[prev].title != 'Moon') { %>
				<a href="/projects/<%= prev %>" class="project-nav-prev">
					<%= data[prev].title %>
				</a>
			<% } %>

		<% // if first item, show link to last
			if (data[prev].title == 'Moon') { %>
				<% var last = data[Object.keys(data)[Object.keys(data).length - 1]].title %>
				<a href="/projects/<%= last %>" class="project-nav-prev">
					<%= last %>
				</a>
			<% } %>

				<a href="/projects/?cat=<%= category %>" class="project-nav-cat"><%= category %></a>
				<a href="/projects/?year=<%= year %>" class="project-nav-year"><%= year %></a>
			
			<%
			// check for and display link to next page
			if (next) { %>
				<a href="/projects/<%= next %>" class="project-nav-next">
					<%= data[next].title %>
				</a>
			<% } %>

			<%
			// check for and display link to next page
			var first = "stormzy"
			if (!next) { %>
				<a href="/projects/<%= first %>" class="project-nav-next">
					<%= first %>
				</a>
			<% } %>

		</nav> <%
	}
}
// end nav %>
